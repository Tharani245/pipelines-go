trigger:
- master
pool:
 vmImage: "ubuntu-latest"

steps:
  - task: GoTool@0
    inputs:
      version: '1.10.*'
  - task: Go@0
    inputs:
      command: 'build'

  - task: Go@0
    inputs:
      command: 'test'
  
  - task: CopyFiles@2
    inputs:
      Contents: '**'
      TargetFolder: '$(build.artifactstagingdirectory)'
  
  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(Build.ArtifactStagingDirectory)'
      ArtifactName: 'drop'
      publishLocation: 'Container'